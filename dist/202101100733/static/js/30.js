webpackJsonp([30],{"5nEy":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"Echarts",data:function(){return{classopt:{},options:[],value:"",value1:"",timer:"",name:"导论测斜仪1001",id:1001,t:[],Date:[],Data:[],Length:0,temp:0,dataTitle:{},myChart:null}},activated:function(){myChart&&this.myChart.resize()},methods:{getDataList:function(){var t=this;this.$http({url:this.$http.adornUrl("/sen/data/info/"+this.id),method:"get"}).then(function(e){var s=e.data;if(console.log("getDataList"),console.log(s),t.Length=s.data.length,t.temp=t.Length-500,s&&0===s.code){console.log("success");for(var a=t.Length-1e3;a<t.Length-500;a++)t.t.push([s.data[a].date,s.data[a].sensorData]);for(var n=0;n<500;n++)t.Date[n]=s.data[t.temp+n].date,t.Data[n]=s.data[t.temp+n].sensorData}else console.log(s.msg),t.test=[]})},myEcharts:function(){var t=this;this.myChart=this.$echarts.init(document.getElementById("main"));var e={visualMap:{top:20,right:0,pieces:[{gt:4,lte:6,color:"#FFA07A"},{lte:4,color:"#000000"},{gt:6,color:"#000000"}],outOfRange:{color:"#DC143C"}},tooltip:{trigger:"axis",position:function(t){return[t[0],"10%"]},axisPointer:{snap:!0}},title:{left:"center",text:this.dataTitle.sensor_class_type+"测量"+this.dataTitle.attribute_value+"图\n"},legend:{data:[this.dataTitle.sensor_class_type+this.dataTitle.sensor_id],top:"6%"},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},xAxis:{type:"time",name:"测量时间",boundaryGap:!1,interval:864e5,splitLine:{show:!1}},yAxis:{name:"测量值("+this.dataTitle.attribute_unit+")",min:this.dataTitle.sensor_measure_lower,max:this.dataTitle.sensor_measure_higher,type:"value",boundaryGap:[0,"100%"]},dataZoom:[{type:"inside",start:0,end:25},{start:0,end:15,handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"80%",handleStyle:{color:"#fff",shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.6)",shadowOffsetX:2,shadowOffsetY:2}}],series:[{name:this.dataTitle.sensor_class_type+this.dataTitle.sensor_id,type:"line",smooth:!0,symbol:"none",sampling:"average",itemStyle:{color:"rgb(255, 70, 131)"},markLine:{silent:!0,data:[{yAxis:this.dataTitle.alarm_low_limit},{yAxis:this.dataTitle.alarm_high_limit}]},data:this.t,areaStyle:{normal:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#FF4683"},{offset:1,color:"#FF9E44"}],globalCoord:!1}}}}]};0==this.t.length&&this.myChart.clear(),this.myChart.setOption(e,!0),window.addEventListener("resize",function(){t.myChart.resize()})},getSensorClass:function(){var t=this;console.log("getSensorClass"),this.$http({url:this.$http.adornUrl("/sen/sensorclass/senClassBindList"),method:"get"}).then(function(e){var s=e.data;if(s&&0===s.code){console.log(s.senClassBindList.length);for(var a=0;a<s.senClassBindList.length;a++){var n={value:s.senClassBindList[a].sensor_id,label:s.senClassBindList[a].sensor_id};if(t.classopt.hasOwnProperty(s.senClassBindList[a].sensor_class_type))t.classopt[s.senClassBindList[a].sensor_class_type].push(n);else{var o={value:s.senClassBindList[a].sensor_class_type,label:s.senClassBindList[a].sensor_class_type};t.options.push(o),console.log(t.classopt),t.classopt[s.senClassBindList[a].sensor_class_type]=[],t.classopt[s.senClassBindList[a].sensor_class_type].push(n)}}console.log("options   classopt"),console.log(t.options),console.log(t.classopt)}})},updateData:function(){var t=this;console.log(this.value1),""==this.value1&&this.$message({showClose:!0,message:"请选择类和传感器id",type:"error"}),this.$http({url:this.$http.adornUrl("/sen/data/senOneHourData/"+this.value1),method:"get"}).then(function(e){var s=e.data;if(s&&0===s.code){console.log("data"),console.log(s),t.dataTitle=s.senAttribute[0];var a;a=s.senOneHourData,console.log(s.senOneHourData),console.log(a),console.log(a.length);for(var n=0;n<a.length;n++)t.t.push([a[n].date,a[n].sensorData]);console.log(t.dataTitle),console.log("tttttt"),console.log(t.t),0==t.t.length&&(console.log(t.t.length),t.$message({showClose:!0,message:"该传感器这段时间未产生数据",type:"warning"}),t.myChart.hideLoading())}t.myEcharts()})},classChanged:function(t){console.log("value"),this.value1="",this.t=[]},sensorChanged:function(t){this.t=[]}},get:function(){console.log("this.temp")},mounted:function(){this.getSensorClass(),this.myEcharts()}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Echarts"},[s("div",{staticClass:"select"},[s("span",{staticClass:"title",staticStyle:{"padding-left":"70px","padding-right":"10px"}},[t._v("传感器类")]),t._v(" "),s("el-select",{attrs:{clearable:"",placeholder:"请选择传感器类"},on:{change:t.classChanged},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),s("span",{staticClass:"title",staticStyle:{"padding-left":"70px","padding-right":"10px"}},[t._v("下属传感器")]),t._v(" "),s("el-select",{staticStyle:{"padding-right":"10px"},attrs:{clearable:"",placeholder:"请选择下属传感器id"},on:{change:t.sensorChanged},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}},t._l(t.classopt[t.value],function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),s("el-button",{attrs:{type:"primary",round:""},on:{click:t.updateData}},[t._v("确定")])],1),t._v(" "),s("div",{staticStyle:{width:"700px",height:"400px","margin-left":"140px"},attrs:{id:"main"}})])},staticRenderFns:[]};var o=s("VU/8")(a,n,!1,function(t){s("uWpO")},null,null);e.default=o.exports},shS3:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,'\n.select {\r\n  padding-bottom: 60px;\r\n  margin-left: 100px;\r\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,\r\n    Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;\r\n  font-size: 18px;\n}\n.title {\r\n  font-weight: bold;\r\n  color: #7b68ee;\n}\r\n',""])},uWpO:function(t,e,s){var a=s("shS3");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s("rjj0")("58f45de4",a,!0)}});