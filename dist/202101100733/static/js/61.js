webpackJsonp([61],{zEYB:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={data:function(){return{visible:!1,dataForm:{logId:0,terminalId:"",sensorId:"",alarmLowLimit:"",alarmHighLimit:"",logUpdateTime:"",logDescribe:"",sensorSaveTable:""},dataRule:{terminalId:[{required:!0,message:"终端id不能为空",trigger:"blur"}],sensorId:[{required:!0,message:"该终端下对标此规则的传感器id不能为空",trigger:"blur"}],alarmLowLimit:[{required:!0,message:"报警下限不能为空",trigger:"blur"}],alarmHighLimit:[{required:!0,message:"报警数值上限（必须在测量范围内）不能为空",trigger:"blur"}],logUpdateTime:[{required:!0,message:"最近一次更新该报警规则的时间不能为空",trigger:"blur"}],logDescribe:[{required:!0,message:"报警规则描述不能为空",trigger:"blur"}],sensorSaveTable:[{required:!0,message:"数据存储表名不能为空",trigger:"blur"}]}}},methods:{init:function(a){var e=this;this.dataForm.logId=a||0,this.visible=!0,this.$nextTick(function(){e.$refs.dataForm.resetFields(),e.dataForm.logId&&e.$http({url:e.$http.adornUrl("/ala/alarmrule2/info/"+e.dataForm.logId),method:"get",params:e.$http.adornParams()}).then(function(a){var t=a.data;t&&0===t.code&&(e.dataForm.terminalId=t.alarmRule2.terminalId,e.dataForm.sensorId=t.alarmRule2.sensorId,e.dataForm.alarmLowLimit=t.alarmRule2.alarmLowLimit,e.dataForm.alarmHighLimit=t.alarmRule2.alarmHighLimit,e.dataForm.logUpdateTime=t.alarmRule2.logUpdateTime,e.dataForm.logDescribe=t.alarmRule2.logDescribe,e.dataForm.sensorSaveTable=t.alarmRule2.sensorSaveTable)})})},dataFormSubmit:function(){var a=this;this.$refs.dataForm.validate(function(e){e&&a.$http({url:a.$http.adornUrl("/ala/alarmrule2/"+(a.dataForm.logId?"update":"save")),method:"post",data:a.$http.adornData({logId:a.dataForm.logId||void 0,terminalId:a.dataForm.terminalId,sensorId:a.dataForm.sensorId,alarmLowLimit:a.dataForm.alarmLowLimit,alarmHighLimit:a.dataForm.alarmHighLimit,logUpdateTime:a.dataForm.logUpdateTime,logDescribe:a.dataForm.logDescribe,sensorSaveTable:a.dataForm.sensorSaveTable})}).then(function(e){var t=e.data;t&&0===t.code?a.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){a.visible=!1,a.$emit("refreshDataList")}}):a.$message.error(t.msg)})})}}},l={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("el-dialog",{attrs:{title:a.dataForm.id?"修改":"新增","close-on-click-modal":!1,visible:a.visible},on:{"update:visible":function(e){a.visible=e}}},[t("el-form",{ref:"dataForm",attrs:{model:a.dataForm,rules:a.dataRule,"label-width":"80px"},nativeOn:{keyup:function(e){if(!("button"in e)&&a._k(e.keyCode,"enter",13,e.key,"Enter"))return null;a.dataFormSubmit()}}},[t("el-form-item",{attrs:{label:"终端id",prop:"terminalId"}},[t("el-input",{attrs:{placeholder:"终端id"},model:{value:a.dataForm.terminalId,callback:function(e){a.$set(a.dataForm,"terminalId",e)},expression:"dataForm.terminalId"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"该终端下对标此规则的传感器id",prop:"sensorId"}},[t("el-input",{attrs:{placeholder:"该终端下对标此规则的传感器id"},model:{value:a.dataForm.sensorId,callback:function(e){a.$set(a.dataForm,"sensorId",e)},expression:"dataForm.sensorId"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"报警下限",prop:"alarmLowLimit"}},[t("el-input",{attrs:{placeholder:"报警下限"},model:{value:a.dataForm.alarmLowLimit,callback:function(e){a.$set(a.dataForm,"alarmLowLimit",e)},expression:"dataForm.alarmLowLimit"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"报警数值上限（必须在测量范围内）",prop:"alarmHighLimit"}},[t("el-input",{attrs:{placeholder:"报警数值上限（必须在测量范围内）"},model:{value:a.dataForm.alarmHighLimit,callback:function(e){a.$set(a.dataForm,"alarmHighLimit",e)},expression:"dataForm.alarmHighLimit"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"最近一次更新该报警规则的时间",prop:"logUpdateTime"}},[t("el-input",{attrs:{placeholder:"最近一次更新该报警规则的时间"},model:{value:a.dataForm.logUpdateTime,callback:function(e){a.$set(a.dataForm,"logUpdateTime",e)},expression:"dataForm.logUpdateTime"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"报警规则描述",prop:"logDescribe"}},[t("el-input",{attrs:{placeholder:"报警规则描述"},model:{value:a.dataForm.logDescribe,callback:function(e){a.$set(a.dataForm,"logDescribe",e)},expression:"dataForm.logDescribe"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"数据存储表名",prop:"sensorSaveTable"}},[t("el-input",{attrs:{placeholder:"数据存储表名"},model:{value:a.dataForm.sensorSaveTable,callback:function(e){a.$set(a.dataForm,"sensorSaveTable",e)},expression:"dataForm.sensorSaveTable"}})],1)],1),a._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){a.visible=!1}}},[a._v("取消")]),a._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(e){a.dataFormSubmit()}}},[a._v("确定")])],1)],1)},staticRenderFns:[]},o=t("VU/8")(r,l,!1,null,null,null);e.default=o.exports}});