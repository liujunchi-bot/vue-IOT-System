webpackJsonp([26],{Qibn:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"Echarts",data:function(){return{mychartData:[],classopt:{},options:[],value:"",value1:"",timer:"",name:"导论测斜仪1001",id:1001,t:[],Date:[],Data:[],Length:0,temp:0,dataTitle:{},pieData:{}}},activated:function(){},methods:{getDataList:function(){var t=this;this.$http({url:this.$http.adornUrl("/sen/data/info/"+this.id),method:"get"}).then(function(e){var a=e.data;if(console.log("getDataList"),console.log(a),t.Length=a.data.length,t.temp=t.Length-500,a&&0===a.code){console.log("success");for(var s=t.Length-1e3;s<t.Length-500;s++)t.t.push([a.data[s].date,a.data[s].sensorData]);for(var o=0;o<500;o++)t.Date[o]=a.data[t.temp+o].date,t.Data[o]=a.data[t.temp+o].sensorData}else console.log(a.msg),t.test=[]})},myEcharts:function(){var t=document.getElementsByClassName("roseChart");console.log("pieCharts"),console.log(t.length),console.log(this.mychartData),0==t.length&&this.updateData();for(var e=0;e<t.length;e++){var a,s=this.$echarts.init(t[e]);a=this.mychartData[e].senAttribute[0];for(var o=[],n=0;n<this.mychartData[e].senTodayData.length;n++)o.push([this.mychartData[e].senTodayData[n].date,this.mychartData[e].senTodayData[n].data]);console.log(a),console.log(o);var l={visualMap:{top:20,right:0,pieces:[{gt:4,lte:6,color:"#FFA07A"},{lte:4,color:"#000000"},{gt:6,color:"#000000"}],outOfRange:{color:"#DC143C"}},tooltip:{trigger:"axis",position:function(t){return[t[0],"10%"]},axisPointer:{snap:!0}},title:{left:"center",text:a.sensor_class_type+"测量"+a.attribute_value+"图\n"},legend:{data:[a.sensor_class_type+a.sensor_id],top:"6%"},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},xAxis:{type:"time",name:"测量时间",boundaryGap:!1,interval:864e5,splitLine:{show:!1}},yAxis:{name:"测量值("+a.attribute_unit+")",min:a.sensor_measure_lower,max:a.sensor_measure_higher,type:"value",boundaryGap:[0,"100%"]},dataZoom:[{type:"inside",start:0,end:25},{start:0,end:15,handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"80%",handleStyle:{color:"#fff",shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.6)",shadowOffsetX:2,shadowOffsetY:2}}],series:[{name:a.sensor_class_type+a.sensor_id,type:"line",smooth:!0,symbol:"none",sampling:"average",itemStyle:{color:"rgb(255, 70, 131)"},markLine:{silent:!0,data:[{yAxis:a.alarm_low_limit},{yAxis:a.alarm_high_limit}]},data:o,areaStyle:{normal:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#FF4683"},{offset:1,color:"#FF9E44"}],globalCoord:!1}}}}]};console.log(l),0==o.length&&(s.clear(),s.hideLoading()),s.setOption(l,!0)}console.log("sucess")},getAlarmTerminal:function(){var t=this;this.$http({url:this.$http.adornUrl("/ter/terminal/alaTerInfo"),method:"get"}).then(function(e){var a=e.data;if(a&&0===a.code)for(var s=0;s<a.alaTerInfoSet.length;s++){var o={value:a.alaTerInfoSet[s].terminal_id,label:a.alaTerInfoSet[s].terminal_class_name+a.alaTerInfoSet[s].terminal_model};t.options.push(o)}})},myPie:function(){var t=this.$echarts.init(document.getElementById("pieChart")),e=[],a=[];for(var s in this.pieData)e.push(s),a.push({value:this.pieData[s],name:s});console.log("mypie"),console.log(e),console.log(a);var o={title:{left:"center",text:"该终端的传感器各数据占比"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:10,data:e},series:[{name:"访问来源",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"30",fontWeight:"bold"}},labelLine:{show:!1},data:a}]};""!=this.value&&null!=this.value||(t.dispose(),t.hideLoading()),t.setOption(o,!0)},updateData:function(){var t=this;console.log(this.value),""!=this.value&&null!=this.value||(this.$message({showClose:!0,message:"请选择终端设备",type:"warning"}),this.mychartData=[]),this.$http({url:this.$http.adornUrl("/ter/terminaldata/terSenDataNum/"+this.value),method:"get"}).then(function(e){var a=e.data;a&&0===a.code&&(console.log("data"),console.log(a),t.pieData=a.terSenDataNumMap,t.mychartData=a.sensorInfoAndDataList,console.log(t.pieData)),t.myPie(),t.myEcharts(),t.$message({showClose:!0,message:"成功获取可视化图表",type:"success"})})},classChanged:function(t){console.log("value"),this.value1="",this.t=[]}},get:function(){console.log("this.temp")},mounted:function(){this.getAlarmTerminal(),this.myEcharts(),this.$notify({title:"加载成功",message:"注意：选择终端设备以后才会进行可视化展览",type:"success"})}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Echarts"},[a("div",{staticClass:"select"},[a("span",{staticClass:"title",staticStyle:{"padding-left":"70px","padding-right":"10px"}},[t._v("终端设备id")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择终端设备"},on:{change:t.classChanged},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-button",{attrs:{type:"primary",round:""},on:{click:t.updateData}},[t._v("确定")])],1),t._v(" "),a("div",{staticClass:"DataVis",staticStyle:{display:"flex","flex-wrap":"wrap","margin-top":"20px","justify-content":"space-around"}},[a("div",{staticStyle:{width:"600px",height:"400px","margin-left":"10px"},attrs:{id:"pieChart"}}),t._v(" "),t._l(t.mychartData,function(t,e){return a("span",{key:e},[a("span",{staticClass:"roseChart",staticStyle:{width:"500px",height:"400px"}})])})],2)])},staticRenderFns:[]};var n=a("VU/8")(s,o,!1,function(t){a("TRq1")},null,null);e.default=n.exports},TRq1:function(t,e,a){var s=a("qUR8");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("11cd86e5",s,!0)},qUR8:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,'\n.select {\r\n  padding-bottom: 60px;\r\n  margin-left: 100px;\r\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,\r\n    Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;\r\n  font-size: 18px;\n}\n.title {\r\n  font-weight: bold;\r\n  color: #7b68ee;\n}\r\n',""])}});